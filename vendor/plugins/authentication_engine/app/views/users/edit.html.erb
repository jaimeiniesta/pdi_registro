<% title "Editar Cuenta" %>

<%= error_messages_for :user %>

<% form_for @user, :url => account_path do |f| %>
<fieldset>
  <legend>Actualizar Información</legend>
  <p>
    <%= f.label :name, "Nombre" %><br />
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label :login, "Usuario" %><br />
    <%= f.text_field :login %>
  </p>
  <p>
    <%= f.label :email, "Email" %><br />
    <%= f.text_field :email %>
  </p>
</fieldset>

<fieldset>
  <legend>Registrar OpenID</legend>
  <p>
    <%= f.label :openid_identifier, openid_link %><br />
    <%= f.text_field :openid_identifier %>
  </p>
</fieldset>

<fieldset>
  <legend>Cambiar Contraseña</legend>
  <p>
    <%= f.label :password, "Nueva contraseña" %><br />
    <%= f.password_field :password %>
  </p>
  <p>
    <%= f.label :password_confirmation, "Confirmación nueva contraseña" %><br />
    <%= f.password_field :password_confirmation %>
  </p>
</fieldset>

<fieldset>
 <legend><%= "Informacion Importante" %></legend>
  <p>
    <%= f.label :last_name, "Apellidos" %><br />
    <%= f.text_field :last_name %>
  </p> 
  <p>
    <%= f.label :age, "Edad" %><br />
    <%= f.text_field :age %>
  </p>
  <p>
    <%= f.label :gender, "Sexo" %><br />
    <%= f.select :gender, [ "Masculino", "Femenino" ] %>
  </p>
  <p>
  	<%= f.label :region_id, "Región" %><br />
  	<%= f.select :region_id, Region.all.sort_by(&:name).collect {|region| [region.name, region.id]} %>
  </p>
</fieldset>

<fieldset>
  <%= render :partial => "areas", 
  				   :locals => { :f => f, :object => @user } %>
</fieldset>

<fieldset>
  <legend><%= "Preferencias" %></legend>
  <% f.fields_for :preference, (@user.preference || @user.build_preference) do |preference_form| %>
  <p>
    <%= preference_form.label :language, "Idioma" %><br />
    <%= preference_form.select :language, @languages_available, :include_blank => true %>
  </p>
  <p>
    <%= preference_form.label :time_zone, "Zona Horaria" %><br />
    <%# f.select :time_zone, ActiveSupport::TimeZone.all.map {|tz| [tz.to_s, tz.tzinfo.name] }, :include_blank => true %>
    <%= preference_form.time_zone_select :time_zone, nil, :include_blank => true %>
  </p>
  <% end %>
</fieldset>



<p>
  <%= f.submit "Actualizar Cuenta" %>
</p>
<% end %>
